---
layout: post
title: git日常使用心得
category: 学习笔记
tags: [git]
keywords: git
description:
---

>As with many great things in life, Git began with a bit of creative destruction and fiery controversy.

## 版本控制

版本控制系统(VCS)是一套方便开发团队管理项目的工具。它可以追踪代码的每一次改动，并保存到特殊的数据库中。开发者可以轻松的将项目回滚到历史上的某一个版本上去。

__分布式(Distributed)版本控制__是什么概念呢。在`DVCS`中，没有严格意义上的中央server，每一台用户终端都可以充当中央仓库的角色。因为用户终端并不是checkout了项目的快照，而是镜像了整个仓库。用户终端的仓库也可以互相推送自己的更新。

## GIT的~~玄学~~哲学

### Snapshots, Not Differences

Git 和其它版本控制系统（包括 Subversion 和近似工具）的主要差别在于 Git 对待数据的方法。 概念上来区分，其它大部分系统（CVS、Subversion、Perforce、Bazaar 等等）将它们保存的信息看作是一组基本文件和每个文件随时间逐步累积的差异。Git 不按照以上方式对待或保存数据。 反之，Git 更像是把数据看作是对小型文件系统的一组快照。 每次你提交更新，或在 Git 中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。 为了高效，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。 Git 对待数据更像是一个 快照流。这种形式也为git超强的分支管理打下了基础。

### Nearly Every Operation Is Local

本地仓库包含了完整的项目历史，所以不需要经常通过网络读取数据。

>If you’re used to a CVCS where most operations have that network latency overhead, this aspect of Git will make you think that the gods of speed have blessed Git with unworldly powers. Because you have the entire history of the project right there on your local disk, most operations seem almost instantaneous.（仿佛速度之神赋予了git超脱这个世界的能量=。=）

### Git Has Integrity

Git中所有数据在存储前都计算校验和，然后以校验和来引用。它用以计算校验和的机制叫做 SHA-1 散列（hash，哈希）。 这是一个由 40 个十六进制字符（0-9 和 a-f）组成字符串，基于 Git 中文件的内容或目录结构计算出来。Git 数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名。

![img](/img/2016-07-05-git-notes_1.png)

## 三个概念

### 工作区

工作区是对项目的某个版本独立提取出来的内容。 这些从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。

### 暂存区

暂存区是一个文件，保存了下次将提交的文件列表信息，一般在 Git 仓库目录中。 有时候也被称作“索引”，不过一般说法还是叫暂存区域。

### 仓库

仓库是 Git 用来保存项目的元数据和对象数据库的地方。 这是 Git 中最重要的部分，从其它计算机克隆仓库时，拷贝的就是这里的数据。

仓库分为本地仓库(local, git commit的目的地)和远程仓库(remote, git push的终点)

## 初始配置

安装好git之后，通常需要配置个人信息
```
# --global参数表示全局配置
git config --global user.name "Your Name"
git config --global user.email "email@example.com"
```

在linux上，配置文件会出现在3处：
* `~/.config/.gitconfig` 当前用户的配置，上面的指令即是改动的此文件
* `/etc/gitconfig` 所有用户的配置。通常需要加`--system`进行更改
* `project/.git/config` 项目配置，不使用`--global`参数时只会对当前项目生效

~~windows上一般配置文件在`c:/users/$USER/.config/`~~

可通过`--list`参数查看当前全部配置，也可指定key查询特定配置

```
git config –list
git config <key>
```

## 查看帮助

平时使用肯定少不了查文档，git的文档十分的
```
git help <verb>
git <verb> --help
man git-<verb>
```

![img](/img/2016-07-05-git-notes_2.png)

## 创建仓库

### 本地初始化仓库

```
# 初始化当前目录
git init
```

命令执行后，在当前目录下会生成`.git`隐藏文件夹，这便是git的本地仓库。

### 拉取远程仓库

```
git clone https://github.com/monkeyWzr/wlz
```

可以指定项目文件夹名称，如：
```
git clone https://github.com/monkeyWzr/wlz
```

## 忽略文件

### 忽略文件或文件夹只在本地需要使用

此种情况为，文件或文件夹只在本地需要，不应该出现在远程仓库时。
在将忽略文件或路径更新到`.gitignore`后，若对于已经trace的文件，需要让git不再跟踪，执行下列命令：

```
//目标为文件夹则需加入-r参数
git rm --cache /path/to/file
```

### 文件或文件夹的改动不需要提交

有些文件或文件夹的改动不需要提交，则在更新`.gitignore`的同时也要执行执行：

```
git update-index --assume-unchanged logs/*.log
```

此种情况下需要每位成员都在自己的本地仓库执行上述命令。

## 强制更新

有时候需要使用远程版本，覆盖本地版本，可在项目目录下使用：

```
git fetch --all
git reset --hard origin/master
```


## 分支

### 查看分支

```
git branch -r #查看远程分支
git branch -a #查看所有分支
```
### 切换分支

```
git checkout branch_name
```

### 删除分支

```
git push origin --delete branch_name
```
